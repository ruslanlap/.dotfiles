- defaults:
    link:
      create: true
      relink: true
    shell:
      stderr: true

- clean: ['~', '~/.oh-my-zsh']

- link:
    ~/.config/nvim: nvim  # Лінкуємо всю папку nvim

- link:
    # Якщо у вас загальний .dotfiles-репозиторій
    # (можна залишити його тут або видалити, якщо не потрібно)
    ~/.dotfiles: ''

    ~/.vimrc: vimrc
    ~/.bashrc: bashrc
    ~/.p10k.zsh: p10k.zsh
    ~/.profile: profile
    ~/.bash_logout: bash_logout
    ~/.gitconfig: gitconfig

    ~/.zshrc:
      force: true
      path: zshrc

    ~/.oh-my-zsh: .oh-my-zsh
    ~/.config: config

- shell:
    - [chmod +x pre-install.sh]
    - [sh pre-install.sh, "Running pre installation script"]
    - command: >
        if ! command -v zsh >/dev/null 2>&1; then
          sudo apt update && sudo apt install -y zsh;
        fi
      description: Installing Zsh if not present
    - command: >
        if [[ $SHELL != "/usr/bin/zsh" ]]; then
          chsh -s $(which zsh);
        fi
      description: Setting Zsh as default shell for current and root user
    - command: >
        if ! command -v nvim >/dev/null 2>&1; then
          sudo apt update && sudo apt install -y neovim;
        fi
      description: Installing Neovim if not present
    - command: >
        mv ~/.config/nvim{,.bak} 2>/dev/null || true;
        mv ~/.local/share/nvim{,.bak} 2>/dev/null || true;
        mv ~/.local/state/nvim{,.bak} 2>/dev/null || true;
        mv ~/.cache/nvim{,.bak} 2>/dev/null || true
      description: Backing up existing Neovim configurations
    - command: >
        git clone https://github.com/LazyVim/starter ~/.config/nvim;
        rm -rf ~/.config/nvim/.git
      description: Installing LazyVim starter configuration
    - [git submodule update --init --recursive, "Install submodules"]
    - [echo "alias ls='lsd'" >> ~/.bashrc]

- clean: ['~']

